{% extends "base.html" %}
{% import "post_macros.html" as post_macros %}

{% block title %}{{config.title}} - {{page.title}}{% endblock title %}

{% block content %}

<article class="post">
    <header class="post-header">
        <h1 class="post-title">{{ page.title }}</h1>
        <div class="post-meta">
            <span class="post-time">Published on {{ page.date | date(format="%a %d %b %Y") }}</span>
            {% if page.taxonomies.tags %}
            <ul>
                {% for tag in page.taxonomies.tags %}
                <li class="pill"><a href="{{ get_taxonomy_url(kind="tags", name=tag) }}">{{ tag }}</a></li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </header>

    {% if page.toc %}
    <div class="post-toc" id="post-toc">
        <!--<h2 class="post-toc-title">Content</h2>-->
        <div class="post-toc-content always-active">
            <nav id="TableOfContents">
                <ul>
                    {% for h1 in page.toc %}
                    <li>
                        <a href="{{h1.permalink | safe}}" class="toc-link">{{ h1.title }}</a>
                        {% if h1.children %}
                        <ul>
                            {% for h2 in h1.children %}
                            <li>
                                <a href="{{h2.permalink | safe}}" class="toc-link">{{ h2.title }}</a>
                            </li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </nav>
        </div>
    </div>
    {% endif %}

    <div class="post-content">
        {{ page.content | safe }}
    </div>

    {% block page_before_footer %}
    {% endblock page_before_footer %}

    <div class="post-footer">
        {% block page_footer %}
        {% if page.backlinks | length > 0 %}
        <h3>Backlinks</h3>
        {% for page in page.backlinks %}
        <a href="{{ page.permalink }}" title="{{ page.title }}">{{ page.title }}</a>
        {% endfor %}

        {% endif %}
        {% endblock page_footer %}

    </div>

    {% block page_after_footer %}
    {% endblock page_after_footer %}
</article>

{% endblock content %}